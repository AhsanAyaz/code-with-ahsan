---
phase: 07-projects-demos-templates
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - src/types/mentorship.ts
  - src/lib/projectTemplates.ts
  - src/app/projects/new/page.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "System provides 3 project templates: Fullstack App, AI Tool, Open Source Library"
    - "Each template includes predefined tech stack, timeline suggestion, recommended skills, and description scaffold"
    - "Creator can select a template when creating a project and form fields auto-populate"
    - "Creator can customize any template-populated field before submitting"
    - "Creating a project without a template still works (Blank Project option)"
  artifacts:
    - path: "src/types/mentorship.ts"
      provides: "ProjectTemplate type and ProjectTemplateId type"
      contains: "ProjectTemplate"
    - path: "src/lib/projectTemplates.ts"
      provides: "Template definitions array with 3 templates"
      exports: ["PROJECT_TEMPLATES", "getTemplateById"]
    - path: "src/app/projects/new/page.tsx"
      provides: "Template selector UI with auto-population"
      contains: "selectedTemplate"
  key_links:
    - from: "src/app/projects/new/page.tsx"
      to: "src/lib/projectTemplates.ts"
      via: "import PROJECT_TEMPLATES, getTemplateById"
      pattern: "import.*projectTemplates"
    - from: "src/lib/projectTemplates.ts"
      to: "src/types/mentorship.ts"
      via: "import ProjectTemplate type"
      pattern: "import.*ProjectTemplate"
---

<objective>
Add project templates system: type definitions, template data, and template selector in project creation form.

Purpose: Satisfy TMPL-01 (provide templates), TMPL-02 (predefined fields), and TMPL-03 (customize template fields). Templates accelerate project creation by pre-filling common configurations.

Output: ProjectTemplate type, 3 template definitions, and updated creation form with template selection and auto-population.
</objective>

<execution_context>
@/Users/amu1o5/.claude/get-shit-done/workflows/execute-plan.md
@/Users/amu1o5/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/types/mentorship.ts
@src/app/projects/new/page.tsx
@src/app/api/projects/route.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Define ProjectTemplate type and template data</name>
  <files>src/types/mentorship.ts, src/lib/projectTemplates.ts</files>
  <action>
1. In `src/types/mentorship.ts`, add after the existing Project interface:

```typescript
export type ProjectTemplateId = "fullstack-app" | "ai-tool" | "open-source-library";

export interface ProjectTemplate {
  id: ProjectTemplateId;
  name: string;
  description: string;           // Template description shown in selector
  defaultTitle: string;           // Suggested title placeholder
  defaultDescription: string;     // Pre-filled description scaffold
  suggestedTechStack: string[];   // Pre-filled tech stack
  suggestedDifficulty: ProjectDifficulty;
  suggestedMaxTeamSize: number;
  suggestedTimeline: string;      // e.g., "4-6 weeks" - display only, informational
  recommendedSkills: string[];    // Display only, helps creators think about requirements
}
```

Also add an optional `templateId` field to the existing `Project` interface:
```typescript
templateId?: ProjectTemplateId;  // Which template was used (if any)
```

2. Create `src/lib/projectTemplates.ts` with 3 template definitions:

- **Fullstack App**: name "Fullstack Web Application", suggestedTechStack: ["React", "Node.js", "PostgreSQL", "TypeScript"], difficulty: "intermediate", maxTeamSize: 4, timeline: "6-8 weeks", recommendedSkills: ["Frontend development", "Backend APIs", "Database design"], defaultDescription scaffold about building a full-stack web application with frontend, backend, and database.

- **AI Tool**: name "AI/ML Tool", suggestedTechStack: ["Python", "OpenAI API", "FastAPI", "React"], difficulty: "advanced", maxTeamSize: 3, timeline: "4-6 weeks", recommendedSkills: ["Machine learning basics", "API integration", "Data processing"], defaultDescription scaffold about building an AI-powered tool or application.

- **Open Source Library**: name "Open Source Library", suggestedTechStack: ["TypeScript", "npm", "Jest", "GitHub Actions"], difficulty: "intermediate", maxTeamSize: 3, timeline: "4-6 weeks", recommendedSkills: ["Package publishing", "API design", "Documentation writing"], defaultDescription scaffold about creating a reusable open-source library.

Export: `PROJECT_TEMPLATES` (array of all 3), `getTemplateById(id: ProjectTemplateId): ProjectTemplate | undefined`.
  </action>
  <verify>
Run `npx tsc --noEmit` to confirm no type errors. Verify the file exports are correct by checking that `PROJECT_TEMPLATES` has length 3.
  </verify>
  <done>ProjectTemplate type exists in mentorship.ts, 3 template definitions exist in projectTemplates.ts, Project interface has optional templateId field, TypeScript compiles without errors.</done>
</task>

<task type="auto">
  <name>Task 2: Add template selector to project creation form</name>
  <files>src/app/projects/new/page.tsx, src/app/api/projects/route.ts</files>
  <action>
1. Update `src/app/projects/new/page.tsx`:

- Import `PROJECT_TEMPLATES, getTemplateById` from `@/lib/projectTemplates` and `ProjectTemplateId` from `@/types/mentorship`.
- Add state: `const [selectedTemplate, setSelectedTemplate] = useState<ProjectTemplateId | "blank">("blank")`.
- Add controlled state for form fields that need to be populated by templates: `title` (string), `description` (string), `techStack` (string), `difficulty` (string), `maxTeamSize` (number). Initialize with empty/default values.
- Convert form from uncontrolled (relying on FormData) to controlled inputs using these state values. The `useActionState` form action should read from these state values (they're still submitted as FormData via the form's hidden inputs or by reading from the controlled inputs).

- Add a **Template Selector** section at the top of the form (before the Title field), styled as a grid of radio-style cards:
  ```
  <div className="form-control mb-6">
    <label className="label"><span className="label-text font-semibold">Start from a Template</span></label>
    <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
      {/* Blank Project option */}
      <div onClick={() => handleTemplateSelect("blank")} className={`card cursor-pointer border-2 p-4 ${selectedTemplate === "blank" ? "border-primary bg-primary/5" : "border-base-300"}`}>
        <h3 className="font-semibold">Blank Project</h3>
        <p className="text-sm text-base-content/70">Start from scratch with empty fields</p>
      </div>
      {/* Template cards */}
      {PROJECT_TEMPLATES.map(t => (
        <div key={t.id} onClick={() => handleTemplateSelect(t.id)} className={`card cursor-pointer border-2 p-4 ${selectedTemplate === t.id ? "border-primary bg-primary/5" : "border-base-300"}`}>
          <h3 className="font-semibold">{t.name}</h3>
          <p className="text-sm text-base-content/70">{t.description}</p>
          <div className="flex flex-wrap gap-1 mt-2">
            {t.suggestedTechStack.slice(0, 3).map(tech => <span key={tech} className="badge badge-xs badge-outline">{tech}</span>)}
          </div>
        </div>
      ))}
    </div>
  </div>
  ```

- Create `handleTemplateSelect(id)` function that:
  - If id is "blank": clear all fields to defaults (empty title, empty description, empty techStack, "intermediate" difficulty, 4 maxTeamSize)
  - If id is a template: call `getTemplateById(id)` and populate: title with `defaultTitle` as placeholder (don't set value, let user type), description with `defaultDescription`, techStack with `suggestedTechStack.join(", ")`, difficulty with `suggestedDifficulty`, maxTeamSize with `suggestedMaxTeamSize`
  - Show the `suggestedTimeline` and `recommendedSkills` as an info banner below the template selector when a template is selected

- When a template is selected, show an info box:
  ```
  {selectedTemplate !== "blank" && template && (
    <div className="alert alert-info mb-4">
      <div>
        <p className="text-sm"><strong>Suggested timeline:</strong> {template.suggestedTimeline}</p>
        <p className="text-sm"><strong>Recommended skills:</strong> {template.recommendedSkills.join(", ")}</p>
        <p className="text-xs mt-1">All fields are customizable - adjust to fit your project needs.</p>
      </div>
    </div>
  )}
  ```

- All form fields remain fully editable after template population (this is the "customization" requirement).

2. Update `src/app/api/projects/route.ts` POST handler:
- Accept optional `templateId` in the request body.
- Validate templateId is one of the valid values or undefined.
- Store `templateId` in the project document if provided.
- No other backend changes needed.

3. In the form action (`createProjectAction`), include `templateId: selectedTemplate !== "blank" ? selectedTemplate : undefined` in the POST body.
  </action>
  <verify>
Run `npx tsc --noEmit` to confirm no type errors. Run `npm run build` to verify the page builds without errors. Manually verify by reading the file that: (a) template selector cards render, (b) handleTemplateSelect populates fields, (c) templateId is sent to API.
  </verify>
  <done>Project creation form has template selector with 4 options (Blank + 3 templates). Selecting a template auto-populates description, tech stack, difficulty, and max team size. All fields remain editable. API stores templateId. Building succeeds without errors.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes
2. `npm run build` succeeds
3. `src/types/mentorship.ts` contains ProjectTemplate interface and ProjectTemplateId type
4. `src/lib/projectTemplates.ts` exports PROJECT_TEMPLATES with 3 entries
5. `src/app/projects/new/page.tsx` imports templates and renders selector
6. `src/app/api/projects/route.ts` accepts and stores templateId
</verification>

<success_criteria>
- TMPL-01: 3 templates defined (Fullstack App, AI Tool, Open Source Library)
- TMPL-02: Each template has predefined tech stack, timeline, skills, description
- TMPL-03: Creator can select template, fields auto-populate, and all fields remain editable for customization
</success_criteria>

<output>
After completion, create `.planning/phases/07-projects-demos-templates/07-04-SUMMARY.md`
</output>
